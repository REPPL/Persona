# Milestone: v1.2.0 - Extensibility & TUI

Plugin system and full-screen terminal user interface.

## Goal

Provide a unified plugin architecture for extending Persona with custom components, plus a rich terminal dashboard for monitoring and management.

## Theme

**"Extend & Visualise"** - Extensibility through plugins and visual monitoring.

## Features Completed (7)

| ID | Feature | Category |
|----|---------|----------|
| [F-107](../features/completed/F-107-plugin-system.md) | Plugin system | Core |
| [F-098](../features/completed/F-098-tui-dashboard-app.md) | TUI Dashboard Application | TUI |
| [F-099](../features/completed/F-099-realtime-generation-monitor.md) | Real-Time Generation Monitor | TUI |
| [F-100](../features/completed/F-100-experiment-browser.md) | Experiment Browser | TUI |
| [F-101](../features/completed/F-101-persona-viewer.md) | Persona Viewer | TUI |
| [F-102](../features/completed/F-102-cost-tracker-widget.md) | Cost Tracker Widget | TUI |
| [F-103](../features/completed/F-103-responsive-layout-system.md) | Responsive Layout System | TUI |

## Success Criteria

- [x] Dashboard launches with `persona dashboard` command
- [x] Minimum terminal size validation (80×24)
- [x] Responsive layouts adapt to terminal size
- [x] Real-time progress updates during generation
- [x] Keyboard navigation throughout
- [x] Mouse support enabled
- [x] Theme customisation via TCSS
- [x] Test coverage ≥ 80% (28 tests, 100% passing)

## Architecture

### Component Structure

```
persona/
├── core/                 # Unchanged - business logic
├── cli/                  # Existing CLI (Typer + Rich + questionary)
└── tui/                  # NEW - Full-screen TUI
    ├── __init__.py
    ├── app.py           # Textual App subclass
    ├── screens/         # Screen definitions
    │   ├── dashboard.py
    │   ├── experiments.py
    │   ├── generation.py
    │   └── persona_view.py
    ├── widgets/         # Custom widgets
    │   ├── persona_card.py
    │   ├── progress_panel.py
    │   ├── cost_tracker.py
    │   └── experiment_list.py
    ├── validators.py    # Terminal validation
    └── styles/          # TCSS stylesheets
        ├── app.tcss
        ├── dashboard.tcss
        └── theme.tcss
```

### Dashboard Layout

```
┌─────────────────────────────────────────────────────────────┐
│ PERSONA DASHBOARD                              [?] Help [Q] │
├──────────────────┬──────────────────────────────────────────┤
│                  │                                          │
│   EXPERIMENTS    │   MAIN CONTENT AREA                      │
│   ────────────   │   (changes based on selection)           │
│   > exp-001 ✓    │                                          │
│     exp-002 ⏳   │   ┌─────────────────────────────────┐    │
│     exp-003      │   │  Progress: ████████░░ 80%       │    │
│                  │   │  Personas: 8/10 generated        │    │
│   [+ New]        │   │  Cost: $0.42 estimated           │    │
│                  │   └─────────────────────────────────┘    │
│                  │                                          │
├──────────────────┴──────────────────────────────────────────┤
│ Status: Generating personas... │ Cost: $0.42 │ 14:32:15    │
└─────────────────────────────────────────────────────────────┘
```

### Responsive Breakpoints

| Width | Layout | Features |
|-------|--------|----------|
| < 80 | Error | "Terminal too small" message |
| 80-119 | Compact | Tabbed interface, no sidebar |
| 120-159 | Standard | Sidebar + main content |
| 160+ | Wide | Sidebar + main + details panel |

## Technical Decisions

### Framework: Textual

Based on [R-012: Full-Screen TUI Layout Patterns](../../research/R-012-tui-fullscreen-layout-patterns.md):

- CSS-like styling with TCSS
- Reactive design with async support
- Built-in widget library
- Excellent Rich integration
- Snapshot testing support

### Layout Strategy

Following research recommendations:

1. **Minimum size validation** (80×24) with clear error message
2. **Fractional units** (`fr`) for proportional space allocation
3. **Docked widgets** for headers, footers, sidebars
4. **Programmatic breakpoints** via CSS classes
5. **Resize event handling** with debouncing

### Keyboard Navigation

| Key | Action |
|-----|--------|
| `↑`/`↓` | Navigate lists |
| `Enter` | Select/activate |
| `Tab` | Next panel |
| `Shift+Tab` | Previous panel |
| `?` | Help overlay |
| `Q` | Quit |
| `Esc` | Cancel/back |

## Dependencies

- v1.1.0: API & Integrations (for backend communication patterns)
- v1.0.0: Production ready (stable core)
- Textual ≥ 0.87.0

## Non-Goals

- Web-based dashboard (deferred to future)
- Mobile terminal support (focus on desktop terminals)
- Custom theming beyond built-in options (keep simple initially)

## Optional Installation

```bash
# Install with TUI support
pip install persona[tui]

# Launch dashboard
persona dashboard
```

---

## Related Documentation

- [Milestones Overview](README.md)
- [v1.1.0: API & Integrations](v1.1.0.md) (prerequisite)
- [R-012: Full-Screen TUI Layout Patterns](../../research/R-012-tui-fullscreen-layout-patterns.md)
- [R-011: Interactive CLI Libraries](../../research/R-011-interactive-cli-libraries.md)
- [ADR-0022: Interactive CLI Library Selection](../../decisions/adrs/ADR-0022-interactive-cli-library.md)

---

**Status**: Completed (7 of 7 features complete)
