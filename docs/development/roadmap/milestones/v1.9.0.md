# v1.9.0 - Experiment Infrastructure

## Overview

| Attribute | Value |
|-----------|-------|
| **Theme** | Experiment Infrastructure |
| **Features** | 2 |
| **Status** | ✅ Complete |
| **Dependencies** | v1.8.0 Technical Debt |

## Goals

Enable systematic research organisation through comprehensive experiment management and full data provenance tracking. This milestone builds on v1.7.0's audit trail to provide project-level organisation, variant comparison, and W3C PROV-compliant lineage.

**Target Users:**
- Academic researchers requiring reproducibility
- Data scientists running systematic experiments
- Teams needing full data provenance

---

## Features

| ID | Feature | Priority | Category | Status |
|----|---------|----------|----------|--------|
| [F-124](../features/completed/F-124-experiment-management.md) | Experiment Management System | P1 | Research Infrastructure | ✅ Complete |
| [F-125](../features/completed/F-125-data-lineage-provenance.md) | Data Lineage & Provenance | P2 | Research Infrastructure | ✅ Complete |

---

## Feature Summaries

### F-124: Experiment Management System (P1)

Hierarchical organisation for research workflows with project, experiment, and run management.

**Key Capabilities:**
- Project-level organisation (Project -> Experiment -> Run)
- Variant definition and comparison
- Run reproduction from metadata
- Integration with quality metrics
- SQLite-backed queryable storage

**CLI:** `persona project`, `persona experiment`, `persona run`

### F-125: Data Lineage & Provenance (P2)

W3C PROV-compliant tracking of data transformations and derivations.

**Key Capabilities:**
- Entity-Activity-Agent model
- Content-addressable storage (SHA-256 hashing)
- Ancestor/descendant traversal
- Integrity verification
- PROV-JSON export

**CLI:** `persona lineage show`, `persona lineage trace`, `persona lineage verify`

---

## Research Foundation

This milestone is informed by state-of-the-art research:

### Experiment Tracking
- [MLflow Documentation](https://mlflow.org/docs/latest/index.html): Industry-standard schema
- [Weights & Biases](https://docs.wandb.ai/): Cloud-native experiment organisation
- [Cookiecutter Data Science](https://cookiecutter-data-science.drivendata.org/): Project structure patterns

### Data Lineage
- [W3C PROV Data Model](https://www.w3.org/TR/prov-dm/): Standard provenance vocabulary
- [OpenLineage Specification](https://openlineage.io/): Open standard for lineage
- [Apache Atlas](https://atlas.apache.org/): Enterprise lineage tracking

See [R-016: Experiment & Project Organisation](../../research/R-016-experiment-project-organisation.md) for full research analysis.

---

## Dependencies

### Required (v1.8.0)
- Technical debt addressed for cleaner integration
- Quality command base pattern (S2)

### From v1.7.0
- F-123: Generation Audit Trail (audit record integration)
- F-119-F-122: Quality Commands (metrics capture)

---

## Success Criteria

- [x] Projects can be created, loaded, and archived
- [x] Experiments support multiple variants with comparison
- [x] Runs capture full parameters and are reproducible
- [x] Lineage traces from output to all inputs
- [x] Hash verification detects tampering
- [x] PROV-JSON export validates against schema
- [x] CLI commands functional for all operations
- [x] Test coverage >= 85%
- [x] Overhead < 10% of generation time

---

## CLI Summary

Commands introduced/enhanced in v1.9.0:

```bash
# Project management
persona project create <name>
persona project list
persona project show [name]
persona project register <name> <path>
persona project unregister <name>
persona project add-source <name> <path>
persona project remove-source <name>
persona project defaults
persona project init-registry

# Experiment management
persona experiment create <name>
persona experiment list
persona experiment show <name>
persona experiment delete <name>
persona experiment edit <name>
persona experiment sources <name>
persona experiment history <name>
persona experiment runs <name>
persona experiment record-run <name>
persona experiment clear-history <name>
persona experiment register <name> <path>
persona experiment unregister <name>
persona experiment registry

# Variant management
persona variant create <experiment> <name>
persona variant list <experiment>
persona variant show <experiment> <name>
persona variant update <experiment> <name>
persona variant delete <experiment> <name>
persona variant compare <experiment> <variant1> <variant2>

# Lineage tracking
persona lineage list
persona lineage show <entity_id>
persona lineage trace <entity_id> --direction up|down|both
persona lineage verify <entity_id>
persona lineage export [entity_id] --output <path>
persona lineage agents
persona lineage activities
```

---

## Risk Assessment

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Schema evolution | Medium | Medium | Versioned schemas, migration scripts |
| Storage growth | Low | Low | Archive/prune old projects |
| Complexity for simple use | Medium | Medium | Smart defaults, single-command usage |
| Graph traversal performance | Low | Medium | SQLite indexing, caching |

---

## Related Documentation

- [Roadmap Dashboard](../README.md)
- [v1.8.0: Technical Debt](v1.8.0.md)
- [R-016: Experiment & Project Organisation](../../research/R-016-experiment-project-organisation.md)
- [F-124: Experiment Management](../features/completed/F-124-experiment-management.md)
- [F-125: Data Lineage & Provenance](../features/completed/F-125-data-lineage-provenance.md)

---

**Status**: Complete
