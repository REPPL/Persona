# v1.9.0 - Experiment Infrastructure

## Overview

| Attribute | Value |
|-----------|-------|
| **Theme** | Experiment Infrastructure |
| **Features** | 2 |
| **Status** | Planned |
| **Dependencies** | v1.8.0 Technical Debt |

## Goals

Enable systematic research organisation through comprehensive experiment management and full data provenance tracking. This milestone builds on v1.7.0's audit trail to provide project-level organisation, variant comparison, and W3C PROV-compliant lineage.

**Target Users:**
- Academic researchers requiring reproducibility
- Data scientists running systematic experiments
- Teams needing full data provenance

---

## Features

| ID | Feature | Priority | Category |
|----|---------|----------|----------|
| [F-124](../features/planned/F-124-experiment-management.md) | Experiment Management System | P1 | Research Infrastructure |
| [F-125](../features/planned/F-125-data-lineage-provenance.md) | Data Lineage & Provenance | P2 | Research Infrastructure |

---

## Feature Summaries

### F-124: Experiment Management System (P1)

Hierarchical organisation for research workflows with project, experiment, and run management.

**Key Capabilities:**
- Project-level organisation (Project -> Experiment -> Run)
- Variant definition and comparison
- Run reproduction from metadata
- Integration with quality metrics
- SQLite-backed queryable storage

**CLI:** `persona project`, `persona experiment`, `persona run`

### F-125: Data Lineage & Provenance (P2)

W3C PROV-compliant tracking of data transformations and derivations.

**Key Capabilities:**
- Entity-Activity-Agent model
- Content-addressable storage (SHA-256 hashing)
- Ancestor/descendant traversal
- Integrity verification
- PROV-JSON export

**CLI:** `persona lineage show`, `persona lineage trace`, `persona lineage verify`

---

## Research Foundation

This milestone is informed by state-of-the-art research:

### Experiment Tracking
- [MLflow Documentation](https://mlflow.org/docs/latest/index.html): Industry-standard schema
- [Weights & Biases](https://docs.wandb.ai/): Cloud-native experiment organisation
- [Cookiecutter Data Science](https://cookiecutter-data-science.drivendata.org/): Project structure patterns

### Data Lineage
- [W3C PROV Data Model](https://www.w3.org/TR/prov-dm/): Standard provenance vocabulary
- [OpenLineage Specification](https://openlineage.io/): Open standard for lineage
- [Apache Atlas](https://atlas.apache.org/): Enterprise lineage tracking

See [R-016: Experiment & Project Organisation](../../research/R-016-experiment-project-organisation.md) for full research analysis.

---

## Dependencies

### Required (v1.8.0)
- Technical debt addressed for cleaner integration
- Quality command base pattern (S2)

### From v1.7.0
- F-123: Generation Audit Trail (audit record integration)
- F-119-F-122: Quality Commands (metrics capture)

---

## Success Criteria

- [ ] Projects can be created, loaded, and archived
- [ ] Experiments support multiple variants with comparison
- [ ] Runs capture full parameters and are reproducible
- [ ] Lineage traces from output to all inputs
- [ ] Hash verification detects tampering
- [ ] PROV-JSON export validates against schema
- [ ] CLI commands functional for all operations
- [ ] Test coverage >= 85%
- [ ] Overhead < 10% of generation time

---

## CLI Summary

New commands introduced in v1.9.0:

```bash
# Project management
persona project create "Project Name"
persona project list
persona project show <name>
persona project use <name>
persona project archive <name>

# Experiment management
persona experiment create --name <name> --variants variants.yaml
persona experiment list
persona experiment run <name> --variant <variant>
persona experiment compare <name>
persona experiment status <name>

# Run management
persona run list --experiment <name>
persona run show <run_id>
persona run reproduce <run_id>

# Lineage tracking
persona lineage show <path>
persona lineage trace <path> --direction up|down
persona lineage verify <path>
persona lineage export <path> --format prov-json
persona lineage query --type <type> --since <date>
```

---

## Risk Assessment

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Schema evolution | Medium | Medium | Versioned schemas, migration scripts |
| Storage growth | Low | Low | Archive/prune old projects |
| Complexity for simple use | Medium | Medium | Smart defaults, single-command usage |
| Graph traversal performance | Low | Medium | SQLite indexing, caching |

---

## Related Documentation

- [Roadmap Dashboard](../README.md)
- [v1.8.0: Technical Debt](v1.8.0.md)
- [R-016: Experiment & Project Organisation](../../research/R-016-experiment-project-organisation.md)
- [F-124: Experiment Management](../features/planned/F-124-experiment-management.md)
- [F-125: Data Lineage & Provenance](../features/planned/F-125-data-lineage-provenance.md)

---

**Status**: Planned
