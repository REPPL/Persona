# v2.0.0: Collaboration & Scale

## Overview

| Attribute | Value |
|-----------|-------|
| **Version** | 2.0.0 |
| **Theme** | Collaboration & Scale |
| **Status** | Planned |
| **Dependencies** | v1.14.0 |
| **Features** | 5 |

---

## Goal

Transform Persona from a single-user CLI tool into a collaborative platform supporting teams, organisations, and enterprise deployments. This major version introduces breaking changes to enable multi-user workflows, shared workspaces, and cloud-native deployment patterns.

---

## Theme: "Work Together"

v2.0.0 focuses on enabling team collaboration:

- **Team Workspaces** - Shared experiments, personas, and configurations
- **Access Control** - Role-based permissions for shared resources
- **Sharing & Publishing** - Export personas for external consumption
- **Cloud Integration** - S3, GCS, Azure Blob storage support
- **WebUI Foundation** - Browser-based interface for broader accessibility

---

## Features

### Priority 0 (Critical)

| ID | Feature | Category | Description |
|----|---------|----------|-------------|
| [F-151](../features/planned/F-151-team-workspace-support.md) | Team Workspace Support | Collaboration | Shared experiments and personas |

### Priority 1 (High)

| ID | Feature | Category | Description |
|----|---------|----------|-------------|
| [F-152](../features/planned/F-152-role-based-access-control.md) | Role-Based Access Control | Security | Permissions for shared resources |
| [F-153](../features/planned/F-153-persona-sharing-publishing.md) | Persona Sharing & Publishing | Collaboration | Export for external consumption |
| [F-154](../features/planned/F-154-cloud-storage-integration.md) | Cloud Storage Integration | Infrastructure | S3, GCS, Azure Blob support |
| [F-155](../features/planned/F-155-webui-foundation.md) | WebUI Foundation | UX | Browser-based interface foundation |

---

## Breaking Changes

v2.0.0 introduces several breaking changes per [ADR-0034](../../decisions/adrs/ADR-0034-breaking-changes-policy.md):

### Configuration Schema

```yaml
# v1.x configuration (deprecated)
persona:
  provider: anthropic
  model: claude-sonnet-4-20250514

# v2.0 configuration
persona:
  workspace: default  # NEW: workspace context
  provider:
    name: anthropic
    model: claude-sonnet-4-20250514
  storage:            # NEW: storage configuration
    backend: local    # or: s3, gcs, azure
```

### CLI Changes

| v1.x Command | v2.0 Command | Reason |
|--------------|--------------|--------|
| `persona generate` | `persona generate` | Unchanged |
| `persona validate` | `persona validate` | Unchanged |
| `persona config` | `persona workspace config` | Workspace context |
| N/A | `persona workspace create` | New |
| N/A | `persona team invite` | New |
| N/A | `persona share publish` | New |

### API Changes

| v1.x Endpoint | v2.0 Endpoint | Change |
|---------------|---------------|--------|
| `POST /generate` | `POST /workspaces/{id}/generate` | Workspace-scoped |
| `GET /personas` | `GET /workspaces/{id}/personas` | Workspace-scoped |
| N/A | `GET /workspaces` | New |
| N/A | `POST /teams` | New |

---

## Migration Path

### Automated Migration

```bash
# Check compatibility
persona migrate check --target 2.0

# Perform migration
persona migrate run --target 2.0 --backup

# Verify migration
persona migrate verify
```

### Manual Steps

1. **Configuration Update** - Update config schema to v2.0 format
2. **Data Migration** - Convert local data to workspace structure
3. **API Client Update** - Update API clients to workspace-scoped endpoints

---

## Use Cases Addressed

| Use Case | How Addressed |
|----------|---------------|
| [UC-015](../../use-cases/UC-015-team-collaboration.md) | Team Workspace Support |
| [UC-016](../../use-cases/UC-016-enterprise-deployment.md) | RBAC + Cloud Storage |
| [UC-017](../../use-cases/UC-017-persona-publishing.md) | Sharing & Publishing |

---

## Success Criteria

### Functional

- [ ] Multiple users can work in shared workspace
- [ ] Role-based permissions enforced correctly
- [ ] Personas can be published and consumed externally
- [ ] Cloud storage backends functional
- [ ] WebUI provides core generation functionality

### Performance

- [ ] Workspace operations < 100ms latency
- [ ] Concurrent user support (10+ simultaneous)
- [ ] Cloud storage operations performant

### Quality

- [ ] Test coverage >= 85%
- [ ] Migration path validated
- [ ] Breaking changes documented
- [ ] Deprecation warnings in v1.14.0

---

## Non-Goals (Deferred)

The following are explicitly NOT part of v2.0.0:

- **Real-time collaboration** - Deferred to v2.1.0
- **Multi-modal input** - Deferred to v2.2.0
- **Custom model fine-tuning** - Deferred to v2.3.0
- **Enterprise SSO** - Deferred to v2.1.0

---

## Dependencies

### Required Before v2.0.0

- [x] v1.14.0 complete (Quality Assurance foundation)
- [ ] [R-021: Multi-User Collaboration](../../research/R-021-multi-user-collaboration.md) complete
- [ ] [R-031: Cloud Deployment Patterns](../../research/R-031-cloud-deployment-patterns.md) complete
- [ ] [ADR-0035: WebUI Technology Selection](../../decisions/adrs/ADR-0035-webui-technology-selection.md) accepted
- [ ] [ADR-0036: Multi-Tenancy Architecture](../../decisions/adrs/ADR-0036-multi-tenancy-architecture.md) accepted

### Research Prerequisites

| Research | Status | Purpose |
|----------|--------|---------|
| R-021 | Complete | Multi-user architecture |
| R-031 | Complete | Cloud deployment |
| R-034 | Complete | Real-time collaboration |

---

## Risk Assessment

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Breaking change adoption | Medium | High | Clear migration path, deprecation warnings |
| Multi-tenancy complexity | High | Medium | Project-based isolation (ADR-0036) |
| Cloud storage reliability | Low | High | Multiple backend support |
| WebUI scope creep | Medium | Medium | Foundation only, defer features |

---

## Release Notes (Draft)

### v2.0.0 - Collaboration & Scale

**Breaking Changes:**
- Configuration schema updated for workspace support
- API endpoints now workspace-scoped
- Storage configuration required for cloud backends

**New Features:**
- Team workspace support for shared experiments
- Role-based access control (Owner, Admin, Member, Viewer)
- Persona sharing and publishing
- Cloud storage integration (S3, GCS, Azure Blob)
- WebUI foundation with core generation features

**Migration:**
- Run `persona migrate run --target 2.0` for automated migration
- See [Migration Guide](../../guides/migration/v1-to-v2.md) for details

---

## Related Documentation

- [v1.14.0 Milestone](v1.14.0.md) - Previous milestone
- [R-021: Multi-User Collaboration](../../research/R-021-multi-user-collaboration.md)
- [R-031: Cloud Deployment Patterns](../../research/R-031-cloud-deployment-patterns.md)
- [ADR-0034: Breaking Changes Policy](../../decisions/adrs/ADR-0034-breaking-changes-policy.md)
- [ADR-0035: WebUI Technology Selection](../../decisions/adrs/ADR-0035-webui-technology-selection.md)
- [ADR-0036: Multi-Tenancy Architecture](../../decisions/adrs/ADR-0036-multi-tenancy-architecture.md)

---

**Status**: Planned
