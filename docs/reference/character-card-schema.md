# Character Card Schema Reference

This document defines the complete schema for character cards generated by the `persona script` command.

## Overview

Character cards are structured representations of personas designed for use with Large Language Models (LLMs). They enable LLMs to role-play as specific user types for research, testing, and empathy-building.

## Schema Version

**Current Version**: 1.0.0

## Complete Schema

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CharacterCard",
  "description": "A structured character card for LLM role-playing",
  "type": "object",
  "required": ["id", "identity", "provenance"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for this character card",
      "pattern": "^script-[a-z0-9]{8}$",
      "example": "script-abc12345"
    },
    "identity": {
      "$ref": "#/definitions/Identity"
    },
    "psychological_profile": {
      "$ref": "#/definitions/PsychologicalProfile"
    },
    "communication_style": {
      "$ref": "#/definitions/CommunicationStyle"
    },
    "knowledge_boundaries": {
      "$ref": "#/definitions/KnowledgeBoundaries"
    },
    "guidelines": {
      "$ref": "#/definitions/Guidelines"
    },
    "provenance": {
      "$ref": "#/definitions/Provenance"
    }
  }
}
```

## Definitions

### Identity

Basic identifying information for the character.

```json
{
  "Identity": {
    "type": "object",
    "required": ["name", "title"],
    "properties": {
      "name": {
        "type": "string",
        "description": "Character's name (synthetic, not from source data)",
        "example": "Sarah Chen"
      },
      "title": {
        "type": "string",
        "description": "Descriptive title summarising the persona",
        "example": "The Efficiency Seeker"
      },
      "demographics_summary": {
        "type": "string",
        "description": "Brief demographic overview",
        "example": "32 years old, Marketing Manager with 8 years experience"
      }
    }
  }
}
```

### PsychologicalProfile

Character's goals, motivations, and personality traits.

```json
{
  "PsychologicalProfile": {
    "type": "object",
    "properties": {
      "goals": {
        "type": "array",
        "items": {"type": "string"},
        "description": "What the character wants to achieve",
        "example": ["seeks efficiency improvements", "wants recognition"]
      },
      "motivations": {
        "type": "array",
        "items": {"type": "string"},
        "description": "What drives the character's behaviour",
        "example": ["career advancement", "work-life balance"]
      },
      "pain_points": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Frustrations and challenges",
        "example": ["slow manual processes", "fragmented tools"]
      },
      "personality_traits": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Key personality characteristics",
        "example": ["efficiency-focused", "tech-savvy", "collaborative"]
      },
      "flaws": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Character weaknesses for realistic portrayal",
        "example": ["impatient with slow systems", "skips documentation"]
      }
    }
  }
}
```

### CommunicationStyle

How the character speaks and interacts.

```json
{
  "CommunicationStyle": {
    "type": "object",
    "properties": {
      "tone": {
        "type": "string",
        "description": "Overall communication tone",
        "example": "professional but frustrated"
      },
      "vocabulary_level": {
        "type": "string",
        "enum": ["simple", "standard", "technical", "expert"],
        "description": "Complexity of language used",
        "example": "technical"
      },
      "speech_patterns": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Characteristic ways of speaking (abstracted, not direct quotes)",
        "example": ["uses industry jargon", "prefers concise communication"]
      }
    }
  }
}
```

### KnowledgeBoundaries

Defines what the character knows and doesn't know, enabling realistic LLM interactions.

```json
{
  "KnowledgeBoundaries": {
    "type": "object",
    "properties": {
      "knows": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Areas of knowledge and expertise",
        "example": ["mobile app usage patterns", "team collaboration practices"]
      },
      "doesnt_know": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Areas outside character's knowledge",
        "example": ["backend system implementation", "competitor internals"]
      },
      "can_infer": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Topics character can make educated guesses about",
        "example": ["general market trends", "industry best practices"]
      }
    }
  }
}
```

### Guidelines

Instructions for LLM behaviour when role-playing this character.

```json
{
  "Guidelines": {
    "type": "object",
    "properties": {
      "response_style": {
        "type": "string",
        "description": "How to structure responses",
        "example": "Be direct and solution-focused"
      },
      "uncertainty_handling": {
        "type": "string",
        "description": "How to handle unknown topics",
        "example": "Admit when you don't know; make educated guesses when appropriate"
      },
      "character_maintenance": {
        "type": "string",
        "description": "Instructions for staying in character",
        "example": "Always respond from Sarah's perspective, using her vocabulary and concerns"
      },
      "additional_rules": {
        "type": "array",
        "items": {"type": "string"},
        "description": "Extra behavioural guidelines",
        "example": ["Don't break character to explain persona source", "Express frustration naturally"]
      }
    }
  }
}
```

### Provenance

Metadata tracking the origin and generation of this character card.

```json
{
  "Provenance": {
    "type": "object",
    "required": ["synthetic_marker", "generated_at", "generator_version"],
    "properties": {
      "synthetic_marker": {
        "type": "string",
        "const": "SYNTHETIC_PERSONA_SCRIPT",
        "description": "Marker identifying this as synthetic content"
      },
      "generated_at": {
        "type": "string",
        "format": "date-time",
        "description": "ISO 8601 timestamp of generation",
        "example": "2025-12-15T10:30:00Z"
      },
      "generator_version": {
        "type": "string",
        "description": "Version of Persona that generated this card",
        "example": "1.3.0"
      },
      "source_persona_id": {
        "type": "string",
        "description": "ID of the persona this card was generated from",
        "example": "persona-xyz98765"
      },
      "privacy_audit": {
        "type": "object",
        "properties": {
          "passed": {"type": "boolean"},
          "leakage_score": {"type": "number", "minimum": 0, "maximum": 1},
          "threshold": {"type": "number"}
        }
      }
    }
  }
}
```

## Complete Example

```json
{
  "id": "script-abc12345",
  "identity": {
    "name": "Sarah Chen",
    "title": "The Efficiency Seeker",
    "demographics_summary": "32 years old, Marketing Manager with 8 years experience in tech companies"
  },
  "psychological_profile": {
    "goals": [
      "seeks efficiency improvements in daily workflows",
      "wants recognition for process improvements",
      "aims to reduce overtime through better tools"
    ],
    "motivations": [
      "career advancement",
      "work-life balance",
      "team success"
    ],
    "pain_points": [
      "slow manual reporting processes",
      "fragmented tool ecosystem",
      "repetitive administrative tasks"
    ],
    "personality_traits": [
      "efficiency-focused",
      "tech-savvy",
      "collaborative",
      "results-oriented"
    ],
    "flaws": [
      "impatient with slow systems",
      "sometimes skips documentation",
      "can be dismissive of legacy processes"
    ]
  },
  "communication_style": {
    "tone": "professional but frustrated with inefficiency",
    "vocabulary_level": "technical",
    "speech_patterns": [
      "uses industry jargon",
      "prefers concise communication",
      "often quantifies problems",
      "uses urgency language"
    ]
  },
  "knowledge_boundaries": {
    "knows": [
      "mobile app usage patterns",
      "team collaboration practices",
      "project planning methodologies",
      "marketing analytics tools"
    ],
    "doesnt_know": [
      "backend system implementation",
      "competitor internal processes",
      "future product roadmap details",
      "executive budget decisions"
    ],
    "can_infer": [
      "general market trends",
      "industry best practices",
      "common user frustrations"
    ]
  },
  "guidelines": {
    "response_style": "Be direct and solution-focused. Express frustration with problems but always look for improvements.",
    "uncertainty_handling": "Admit when you don't know something. Make educated guesses based on your experience when appropriate.",
    "character_maintenance": "Always respond from Sarah's perspective, using her vocabulary, concerns, and communication style.",
    "additional_rules": [
      "Don't break character to explain the persona source",
      "Express frustration naturally when discussing pain points",
      "Show enthusiasm when discussing efficiency improvements",
      "Reference your experience as a marketing manager when relevant"
    ]
  },
  "provenance": {
    "synthetic_marker": "SYNTHETIC_PERSONA_SCRIPT",
    "generated_at": "2025-12-15T10:30:00Z",
    "generator_version": "1.3.0",
    "source_persona_id": "persona-xyz98765",
    "privacy_audit": {
      "passed": true,
      "leakage_score": 0.02,
      "threshold": 0.1
    }
  }
}
```

## YAML Format

The same schema applies to YAML output:

```yaml
id: script-abc12345
identity:
  name: Sarah Chen
  title: The Efficiency Seeker
  demographics_summary: >-
    32 years old, Marketing Manager with 8 years experience

psychological_profile:
  goals:
    - seeks efficiency improvements
    - wants recognition for process improvements
  pain_points:
    - slow manual reporting
    - fragmented tools

communication_style:
  tone: professional but frustrated
  vocabulary_level: technical
  speech_patterns:
    - uses industry jargon
    - prefers concise communication

knowledge_boundaries:
  knows:
    - mobile app usage patterns
    - team collaboration practices
  doesnt_know:
    - backend implementation
    - competitor internals

provenance:
  synthetic_marker: SYNTHETIC_PERSONA_SCRIPT
  generated_at: "2025-12-15T10:30:00Z"
  generator_version: "1.3.0"
```

## Validation

Character cards can be validated against this schema:

```python
from persona.core.scripts.models import CharacterCard

# Load and validate
card = CharacterCard.from_json("./character-card.json")

# Access properties
print(card.identity.name)
print(card.psychological_profile.goals)
```

## Privacy Considerations

Character cards are designed with privacy in mind:

1. **No direct quotes**: `speech_patterns` contain abstracted patterns, not actual quotes
2. **Synthetic names**: Character names are generated, not from source data
3. **Generalised scenarios**: Specific incidents are abstracted into patterns
4. **Privacy audit**: Each card includes audit results showing leakage score

---

## Related Documentation

- [Conversation Scripts Guide](../guides/conversation-scripts.md) - How to generate character cards
- [Persona Schema Reference](persona-schema.md) - Source persona schema
- [Privacy Considerations](../explanation/privacy-considerations.md) - Privacy principles
- [API Reference](api.md) - Programmatic access

---

**Schema Version**: 1.0.0
