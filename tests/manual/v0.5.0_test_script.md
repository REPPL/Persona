# Smoke Test: v0.5.0 (5-10 minutes)

## Prerequisites

```bash
cd ~/Development/Sandboxed/Persona
source .venv/bin/activate
pip install -e ".[all]"
```

## Quick Verification

### 1. Version Check
```bash
python -c "import persona; print(persona.__version__)"
```
- [ ] Shows `0.5.0`

### 2. Python SDK (F-087)
```bash
python -c "
from persona.sdk import PersonaSDK, GenerationConfig

sdk = PersonaSDK()
print('SDK initialised:', sdk is not None)
print('Default provider:', sdk._default_provider)

# Test config creation
config = GenerationConfig(
    provider='anthropic',
    model='claude-sonnet-4-20250514',
    count=3,
    complexity='moderate'
)
print('Config created:', config.model)
"
```
- [ ] SDK initialises successfully
- [ ] Config creation works

### 3. Async Support (F-088)
```bash
python -c "
import asyncio
from persona.sdk import PersonaSDK

async def test_async():
    sdk = PersonaSDK()
    # Check async methods exist
    print('has generate_async:', hasattr(sdk, 'generate_async'))
    print('has validate_async:', hasattr(sdk, 'validate_async'))
    return True

result = asyncio.run(test_async())
print('Async test passed:', result)
"
```
- [ ] Async methods exist on SDK
- [ ] Async test passes

### 4. Custom Vendor Configuration (F-043)
```bash
persona vendor list
```
- [ ] Shows built-in providers (anthropic, openai, gemini)
- [ ] Shows custom vendors section

```bash
persona vendor add test-vendor \
    --name "Test Vendor" \
    --api-base "https://api.test.example.com" \
    --auth-env TEST_API_KEY \
    --force
```
- [ ] Vendor added successfully

```bash
persona vendor show test-vendor
```
- [ ] Shows vendor details

```bash
persona vendor remove test-vendor --force
```
- [ ] Vendor removed successfully

### 5. Custom Model Configuration (F-044)
```bash
persona model list
```
- [ ] Shows built-in models by provider
- [ ] Shows custom models section

```bash
persona model add test-model \
    --name "Test Model" \
    --provider openai \
    --context 128000 \
    --input-price 5.00 \
    --output-price 15.00 \
    --force
```
- [ ] Model added successfully

```bash
persona model show test-model
```
- [ ] Shows model details including pricing

```bash
persona model pricing --provider openai
```
- [ ] Shows pricing table for OpenAI models

```bash
persona model remove test-model --force
```
- [ ] Model removed successfully

### 6. Custom Prompt Templates (F-046)
```bash
persona template list
```
- [ ] Shows built-in templates (default, healthcare)
- [ ] Shows template metadata

```bash
persona template show default --content
```
- [ ] Shows template content
- [ ] Shows required variables

```bash
persona template create my-template --name "My Template" --force
```
- [ ] Template created successfully

```bash
persona template test my-template
```
- [ ] Template renders without errors

```bash
persona template remove my-template --force
```
- [ ] Template removed successfully

### 7. Custom Workflow Configuration (F-045)
```bash
persona workflow list
```
- [ ] Shows built-in workflows (default, multi-step)
- [ ] Shows workflow metadata

```bash
persona workflow show default
```
- [ ] Shows workflow details
- [ ] Shows steps in workflow

```bash
persona workflow create my-workflow --name "My Workflow" --force
```
- [ ] Workflow created successfully

```bash
persona workflow validate my-workflow
```
- [ ] Workflow validates successfully

```bash
persona workflow remove my-workflow --force
```
- [ ] Workflow removed successfully

### 8. Dynamic Vendor Discovery (F-047)
```bash
persona vendor discover
```
- [ ] Shows discovery results
- [ ] Categorises by status (Available, Not Configured, Unavailable)
- [ ] Shows response times for reachable endpoints

### 9. Dynamic Model Discovery (F-048)
```bash
persona model discover
```
- [ ] Shows discovered models by provider
- [ ] Shows model status (available, deprecated)
- [ ] Groups results by provider

```bash
persona model check gpt-4o
```
- [ ] Shows availability status
- [ ] Shows any deprecation warnings

### 10. Edit Experiment Command (F-049)
```bash
persona experiment create test-edit-exp --base-dir /tmp/persona-test
```
- [ ] Experiment created

```bash
persona experiment edit test-edit-exp --base-dir /tmp/persona-test
```
- [ ] Shows current configuration
- [ ] Shows usage examples

```bash
persona experiment edit test-edit-exp --set count=5 --base-dir /tmp/persona-test
```
- [ ] Field updated successfully

```bash
persona experiment edit test-edit-exp --set provider=openai --set model=gpt-4o --base-dir /tmp/persona-test
```
- [ ] Multiple fields updated

```bash
echo "test,data" > /tmp/test-source.csv
persona experiment edit test-edit-exp --add-source /tmp/test-source.csv --base-dir /tmp/persona-test
```
- [ ] Source added successfully

```bash
persona experiment sources test-edit-exp --base-dir /tmp/persona-test
```
- [ ] Shows added source

```bash
persona experiment edit test-edit-exp --rollback 1 --base-dir /tmp/persona-test
```
- [ ] Rollback successful

### 11. Experiment History Command (F-050)
```bash
persona experiment record-run test-edit-exp \
    --model gpt-4o --provider openai \
    --personas 3 --cost 0.45 \
    --base-dir /tmp/persona-test
```
- [ ] Run recorded successfully

```bash
persona experiment record-run test-edit-exp \
    --model claude-sonnet-4.5 --provider anthropic \
    --personas 5 --cost 0.72 \
    --base-dir /tmp/persona-test
```
- [ ] Second run recorded

```bash
persona experiment history test-edit-exp --base-dir /tmp/persona-test
```
- [ ] Shows run history table
- [ ] Shows run IDs, timestamps, models, costs

```bash
persona experiment history test-edit-exp --stats --base-dir /tmp/persona-test
```
- [ ] Shows aggregate statistics
- [ ] Shows total runs, personas, cost

```bash
persona experiment history test-edit-exp --diff "1,2" --base-dir /tmp/persona-test
```
- [ ] Shows comparison between runs
- [ ] Shows differences and deltas

```bash
persona experiment history test-edit-exp --last 1 --base-dir /tmp/persona-test
```
- [ ] Shows only the most recent run

```bash
persona experiment clear-history test-edit-exp --force --base-dir /tmp/persona-test
```
- [ ] History cleared successfully

### 12. Cleanup
```bash
persona experiment delete test-edit-exp --force --base-dir /tmp/persona-test
rm -rf /tmp/persona-test /tmp/test-source.csv
```
- [ ] Experiment deleted
- [ ] Temp files cleaned up

### 13. All Tests Pass
```bash
pytest tests/ -q
```
- [ ] All 1494 tests pass

## Report

- **Version**: v0.5.0
- **Date**: ___
- **Result**: PASS / FAIL
- **Notes**: ___
