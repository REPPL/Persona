# Manual Test Script: v0.1.0 - Foundation

This script verifies all v0.1.0 functionality. Execute tests in order and record results.

## Prerequisites

- Python 3.12+
- Git checkout of v0.1.0 tag
- At least one API key (OpenAI, Anthropic, or Google) for real API tests
- OR use mock mode for testing without API keys

## Installation

```bash
# 1. Checkout the version
git checkout v0.1.0

# 2. Create fresh virtual environment
python3.12 -m venv .venv-test
source .venv-test/bin/activate  # On Windows: .venv-test\Scripts\activate

# 3. Install Persona
pip install -e .

# 4. Verify installation
persona --version
```

**Expected Output:**
```
Persona v0.1.0
```

---

## Test 1: Health Check

**Command:**
```bash
persona check
```

**Expected Result:**
- Shows Persona version
- Shows Python version
- Lists configured providers with status
- Overall status indicator

**Pass Criteria:**
- [ ] Version displayed correctly (0.1.0)
- [ ] Python version shown (3.12+)
- [ ] At least one provider shows configured status
- [ ] No error messages

---

## Test 2: Create Experiment

**Command:**
```bash
persona create experiment test-manual-v010
```

**Expected Result:**
- Creates `experiments/test-manual-v010/` directory
- Creates `config.yaml` inside the directory
- Displays success message

**Pass Criteria:**
- [ ] Directory created successfully
- [ ] config.yaml exists and is valid YAML
- [ ] Success message displayed

**Verification:**
```bash
ls experiments/test-manual-v010/
cat experiments/test-manual-v010/config.yaml
```

---

## Test 3: List Experiments

**Command:**
```bash
persona list experiments
```

**Expected Result:**
- Shows table with experiment names
- Includes `test-manual-v010` from previous test

**Pass Criteria:**
- [ ] Table displays correctly
- [ ] test-manual-v010 appears in list

---

## Test 4: Show Experiment Details

**Command:**
```bash
persona show experiment test-manual-v010
```

**Expected Result:**
- Shows experiment configuration
- Displays provider, model settings
- Shows creation timestamp

**Pass Criteria:**
- [ ] Configuration displayed correctly
- [ ] No errors

---

## Test 5: Generate Personas (Mock Mode)

**Command:**
```bash
persona generate --from tests/data/synthetic/interviews_small.csv --mock
```

**Expected Result:**
- Processes CSV file
- Generates personas using mock LLM
- Creates timestamped output directory
- Outputs JSON and/or Markdown personas

**Pass Criteria:**
- [ ] CSV file parsed successfully
- [ ] Output directory created in `outputs/`
- [ ] At least one persona generated
- [ ] metadata.json created

**Verification:**
```bash
ls outputs/
cat outputs/*/metadata.json
```

---

## Test 6: Generate Personas (Real API - Optional)

*Skip this test if no API keys are configured.*

**Command (OpenAI):**
```bash
OPENAI_API_KEY=your-key persona generate --from tests/data/synthetic/interviews_small.csv --provider openai
```

**Command (Anthropic):**
```bash
ANTHROPIC_API_KEY=your-key persona generate --from tests/data/synthetic/interviews_small.csv --provider anthropic
```

**Command (Gemini):**
```bash
GOOGLE_API_KEY=your-key persona generate --from tests/data/synthetic/interviews_small.csv --provider gemini
```

**Expected Result:**
- API call succeeds
- Real personas generated
- Cost recorded in metadata

**Pass Criteria:**
- [ ] API call completes without error
- [ ] Personas contain meaningful content
- [ ] Token usage recorded
- [ ] Cost estimate included in metadata

---

## Test 7: Multi-Format Data Loading

**Test JSON input:**
```bash
persona generate --from tests/data/synthetic/survey_responses.json --mock
```

**Test Markdown input:**
```bash
persona generate --from tests/data/synthetic/user_feedback.md --mock
```

**Test Mixed Format Directory:**
```bash
persona generate --from tests/data/synthetic/mixed_format/ --mock
```

**Pass Criteria:**
- [ ] JSON file loads correctly
- [ ] Markdown file loads correctly
- [ ] Mixed format directory processes all files

---

## Test 8: Cost Estimation

**Command:**
```bash
persona generate --from tests/data/synthetic/interviews_medium.csv --estimate-only
```

**Expected Result:**
- Shows token count estimate
- Shows cost estimate
- Does NOT call LLM API

**Pass Criteria:**
- [ ] Token count displayed
- [ ] Cost estimate shown
- [ ] No actual generation occurs

---

## Test 9: Delete Experiment

**Command:**
```bash
persona delete experiment test-manual-v010
```

**Expected Result:**
- Prompts for confirmation
- Deletes experiment directory
- Shows success message

**Pass Criteria:**
- [ ] Confirmation prompt appears
- [ ] Directory deleted after confirmation
- [ ] Success message displayed

**Verification:**
```bash
ls experiments/  # test-manual-v010 should not appear
```

---

## Test 10: Error Handling - Missing Data

**Command:**
```bash
persona generate --from nonexistent/path/
```

**Expected Result:**
- Clear error message about missing path
- Suggests possible corrections
- Non-zero exit code

**Pass Criteria:**
- [ ] Error message is clear and helpful
- [ ] No stack trace shown to user
- [ ] Exit code is non-zero

---

## Test 11: Error Handling - Invalid API Key

*Requires temporarily setting an invalid key.*

**Command:**
```bash
OPENAI_API_KEY=invalid-key persona generate --from tests/data/synthetic/interviews_small.csv --provider openai
```

**Expected Result:**
- Clear authentication error message
- Suggests checking API key configuration
- Non-zero exit code

**Pass Criteria:**
- [ ] Error identifies API key issue
- [ ] Provides helpful guidance
- [ ] No sensitive information leaked

---

## Test 12: Help System

**Commands:**
```bash
persona --help
persona generate --help
persona create experiment --help
```

**Pass Criteria:**
- [ ] All help text displays correctly
- [ ] Commands are documented
- [ ] Examples are shown where appropriate

---

## Results Summary

| Test | Status | Notes |
|------|--------|-------|
| 1. Health Check | ⬜ | |
| 2. Create Experiment | ⬜ | |
| 3. List Experiments | ⬜ | |
| 4. Show Experiment | ⬜ | |
| 5. Generate (Mock) | ⬜ | |
| 6. Generate (Real API) | ⬜ | Optional |
| 7. Multi-Format Loading | ⬜ | |
| 8. Cost Estimation | ⬜ | |
| 9. Delete Experiment | ⬜ | |
| 10. Error - Missing Data | ⬜ | |
| 11. Error - Invalid Key | ⬜ | |
| 12. Help System | ⬜ | |

**Overall Result:** ⬜ Pass / ⬜ Fail

---

## Sharing Results

After completing all tests, share:

1. The completed results table above
2. Console output from any failed tests
3. Your environment details:
   - OS:
   - Python version:
   - Any issues encountered

Paste results to Claude for review.
