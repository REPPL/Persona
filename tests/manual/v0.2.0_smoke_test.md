# Smoke Test: v0.2.0 (5-10 minutes)

## Prerequisites

- Python 3.12+
- Git checkout of v0.2.0 tag
- At least one API key (OpenAI, Anthropic, or Google) for real API tests
- OR use mock mode for testing without API keys

## Installation

```bash
# 1. Checkout the version
git checkout v0.2.0

# 2. Create fresh virtual environment
python3.12 -m venv .venv-test
source .venv-test/bin/activate  # On Windows: .venv-test\Scripts\activate

# 3. Install Persona
pip install -e .

# 4. Verify installation
persona --version
```

**Expected Output:**
```
Persona v0.2.0
```

---

## Quick Verification

### 1. CLI Health Check
```bash
persona check
```
- [ ] Shows version 0.2.0
- [ ] Shows green status (or yellow with unconfigured providers - expected)

### 2. Import Test
```bash
python -c "
from persona.core.validation import PersonaValidator, ValidationResult
from persona.core.batch import BatchProcessor, BatchResult
from persona.core.comparison import PersonaComparator, ComparisonResult
from persona.core.preview import DataPreviewer, PreviewResult
from persona.core.templates import TemplateManager, PersonaTemplate
from persona.core.evidence import EvidenceLinker, Evidence
from persona.core.refinement import PersonaRefiner, RefinementSession
from persona.core.export import PersonaExporter, ExportFormat
from persona.core.clustering import PersonaClusterer, ClusterResult
print('All v0.2.0 modules import successfully')
"
```
- [ ] Prints success message with no import errors

### 3. Validation Module
```bash
python -c "
from persona.core.validation import PersonaValidator
from persona.core.generation.parser import Persona

validator = PersonaValidator()
persona = Persona(id='test', name='Test User', goals=['Goal 1'])
result = validator.validate(persona)
print(f'Validation: {result.is_valid}, Errors: {len(result.errors)}, Warnings: {len(result.warnings)}')
"
```
- [ ] Shows validation result (should be valid with warnings for missing fields)

### 4. Comparison Module
```bash
python -c "
from persona.core.comparison import PersonaComparator
from persona.core.generation.parser import Persona

comparator = PersonaComparator()
p1 = Persona(id='p1', name='Alice', goals=['Goal A', 'Goal B'])
p2 = Persona(id='p2', name='Bob', goals=['Goal A', 'Goal C'])
result = comparator.compare(p1, p2)
print(f'Similarity: {result.overall_score:.1%}')
"
```
- [ ] Shows similarity percentage (should be ~30-50%)

### 5. Template Module
```bash
python -c "
from persona.core.templates import TemplateManager

manager = TemplateManager()
templates = manager.list_templates()
print(f'Available templates: {len(templates)}')
for t in templates[:3]:
    print(f'  - {t.name} ({t.category.value})')
"
```
- [ ] Shows 4+ templates (ux_research, marketing, academic, product)

### 6. Export Module
```bash
python -c "
from persona.core.export import PersonaExporter, ExportFormat
from persona.core.generation.parser import Persona

exporter = PersonaExporter()
formats = exporter.list_formats()
print(f'Export formats: {len(formats)}')
for f in formats:
    print(f'  - {f[\"id\"]}: {f[\"name\"]}')
"
```
- [ ] Shows 7 export formats (json, markdown, html, figma, miro, uxpressia, csv)

### 7. Clustering Module
```bash
python -c "
from persona.core.clustering import PersonaClusterer
from persona.core.generation.parser import Persona

clusterer = PersonaClusterer(similarity_threshold=0.5)
personas = [
    Persona(id='p1', name='Dev1', goals=['Code'], demographics={'role': 'Developer'}),
    Persona(id='p2', name='Dev2', goals=['Code'], demographics={'role': 'Developer'}),
    Persona(id='p3', name='Mgr1', goals=['Lead'], demographics={'role': 'Manager'}),
]
result = clusterer.cluster(personas)
print(f'Clusters: {result.cluster_count}, Total personas: {result.total_personas}')
"
```
- [ ] Shows cluster count (should be 1-2 clusters)

### 8. Run Automated Tests
```bash
pytest tests/unit/core/test_validation.py tests/unit/core/test_export.py tests/unit/core/test_clustering.py -v --tb=short 2>&1 | tail -20
```
- [ ] All tests pass

---

## Report

```markdown
# Manual Test Results: v0.2.0

**Tester:** ___
**Date:** YYYY-MM-DD
**Environment:** macOS/Linux/Windows

## Results Summary
- Total tests: 8
- Passed: ___
- Failed: ___

## Console Output
[Paste relevant console output here]

## Issues Found
[List any issues or unexpected behaviour]
```

---

**Expected Duration:** 5-10 minutes
