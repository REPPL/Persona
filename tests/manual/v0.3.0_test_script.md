# Manual Test Script: v0.3.0 - Multi-Variation

This script verifies all v0.3.0 functionality. Execute tests in order and record results.

## Prerequisites

- Python 3.12+
- Git checkout of v0.3.0 tag
- At least one API key (OpenAI, Anthropic, or Google) for real API tests
- OR use mock mode for testing without API keys

## Installation

```bash
# 1. Checkout the version
git checkout v0.3.0

# 2. Create fresh virtual environment
python3.12 -m venv .venv-test
source .venv-test/bin/activate  # On Windows: .venv-test\Scripts\activate

# 3. Install Persona
pip install -e .

# 4. Verify installation
persona --version
```

**Expected:** Shows Persona v0.3.0

---

## Test 1: CLI Health Check

**Command:**
```bash
persona check
```

**Expected:** Shows version 0.3.0, shows green status (or yellow with unconfigured providers - expected)

**Pass Criteria:**
- [ ] Shows version 0.3.0
- [ ] Shows green status (or yellow with unconfigured providers - expected)

---

## Test 2: Import Test - v0.3.0 Modules

**Command:**
```bash
python -c "
from persona.core.synthetic import (
    SyntheticDataGenerator,
    SyntheticInterview,
    SyntheticParticipant,
    DataDomain,
    GenerationConfig,
)
from persona.core.data import (
    EmpathyMap,
    EmpathyMapDimension,
    EmpathyMapLoader,
    ParticipantTypeMap,
    WorkshopImporter,
    WorkshopCategory,
)
from persona.core.output import (
    EmpathyTableFormatter,
    EmpathyTableRow,
    TableFormat,
)
from persona.core.generation import (
    ComplexityLevel,
    DetailLevel,
    VariationMatrix,
    PersonaVariation,
)
print('All v0.3.0 modules import successfully')
"
```

**Expected:** Prints "All v0.3.0 modules import successfully" with no import errors

**Pass Criteria:**
- [ ] Prints success message with no import errors

---

## Test 3: Synthetic Data Generation (F-028)

**Command:**
```bash
python -c "
from persona.core.synthetic import SyntheticDataGenerator, GenerationConfig, DataDomain

config = GenerationConfig(seed=42, participant_count=3)
generator = SyntheticDataGenerator(config)
interviews = generator.generate(domain=DataDomain.ECOMMERCE)

print(f'Generated {len(interviews)} interviews')
for i in interviews:
    print(f'  - {i.participant.id}: {i.participant.role}')
print(f'First interview has {len(interviews[0].questions)} questions')
"
```

**Expected:** Generates 3 interviews, shows participant IDs (P001, P002, P003), each interview has questions

**Pass Criteria:**
- [ ] Generates 3 interviews
- [ ] Shows participant IDs (P001, P002, P003)
- [ ] Each interview has questions

---

## Test 4: Empathy Map Loading (F-029)

**Command:**
```bash
python -c "
from persona.core.data import EmpathyMapLoader

yaml_content = '''
participants: 10
method: workshop
data:
  - participant_type: power_user
    tasks: [\"Advanced features\"]
    feelings: [\"Confident\"]
    influences: [\"Documentation\"]
    pain_points: [\"Bugs\"]
    goals: [\"Mastery\"]
'''

import tempfile
from pathlib import Path

with tempfile.NamedTemporaryFile(suffix='.yaml', mode='w', delete=False) as f:
    f.write(yaml_content)
    path = f.name

loader = EmpathyMapLoader()
em = loader.load(Path(path))

print(f'Loaded empathy map with {len(em.data)} participant types')
print(f'Participant type: {em.data[0].participant_type}')
print(f'Goals: {em.data[0].goals}')
"
```

**Expected:** Loads empathy map successfully, shows participant type "power_user", shows goals list

**Pass Criteria:**
- [ ] Loads empathy map successfully
- [ ] Shows participant type "power_user"
- [ ] Shows goals list

---

## Test 5: Empathy Table Output (F-030)

**Command:**
```bash
python -c "
from persona.core.output import EmpathyTableFormatter, EmpathyTableRow
from persona.core.data import ParticipantTypeMap, EmpathyMap

# Create sample data
em = EmpathyMap(data=[
    ParticipantTypeMap(
        participant_type='Developer',
        tasks=['Code', 'Review'],
        feelings=['Focused'],
        influences=['Docs'],
        pain_points=['Bugs'],
        goals=['Ship features'],
    )
])

formatter = EmpathyTableFormatter()
rows = formatter.from_empathy_map(em)
md = formatter.to_markdown(rows)

print('Generated Markdown table:')
print(md[:300])
"
```

**Expected:** Generates Markdown table with headers (Persona, Tasks, Feelings, etc.)

**Pass Criteria:**
- [ ] Generates Markdown table
- [ ] Table has headers (Persona, Tasks, Feelings, etc.)

---

## Test 6: Workshop Import (F-031)

**Command:**
```bash
python -c "
from persona.core.data import WorkshopImporter, MockVisionExtractor
from pathlib import Path
import tempfile

# Create mock image
with tempfile.NamedTemporaryFile(suffix='.jpg', delete=False) as f:
    f.write(b'mock image')
    image_path = Path(f.name)

importer = WorkshopImporter()
results = importer.import_images([image_path])

print(f'Imported {len(results)} images')
print(f'Extracted {len(results[0].post_its)} post-it notes')
print(f'First note: {results[0].post_its[0].text[:50]}...')
"
```

**Expected:** Imports mock image, extracts post-it notes, shows extracted text

**Pass Criteria:**
- [ ] Imports mock image
- [ ] Extracts post-it notes
- [ ] Shows extracted text

---

## Test 7: Variation Matrix (F-033, F-034, F-035)

**Command:**
```bash
python -c "
from persona.core.generation import (
    VariationMatrix,
    ComplexityLevel,
    DetailLevel,
)

matrix = VariationMatrix()

print(f'Total variations: {len(matrix)}')
print()
print('Variation Matrix:')
for v in matrix:
    print(f'  {v.id}: {v.complexity.value}/{v.detail.value} (token mult: {v.token_multiplier:.2f})')
"
```

**Expected:** Shows 6 variations (V1-V6), each has complexity/detail combination, token multipliers shown

**Pass Criteria:**
- [ ] Shows 6 variations (V1-V6)
- [ ] Each has complexity/detail combination
- [ ] Token multipliers shown

---

## Test 8: Run Automated Tests

**Command:**
```bash
pip install pytest
pytest tests/unit/core/test_synthetic.py tests/unit/core/test_empathy_map.py tests/unit/core/test_empathy_table.py tests/unit/core/test_workshop.py tests/unit/core/test_variations.py -v --tb=short 2>&1 | tail -20
```

**Expected:** All tests pass (173 expected)

**Pass Criteria:**
- [ ] All tests pass

---

## Results Summary

| Test | Status | Notes |
|------|--------|-------|
| 1. CLI Health Check | ⬜ | |
| 2. Import Test | ⬜ | |
| 3. Synthetic Data Generation | ⬜ | |
| 4. Empathy Map Loading | ⬜ | |
| 5. Empathy Table Output | ⬜ | |
| 6. Workshop Import | ⬜ | |
| 7. Variation Matrix | ⬜ | |
| 8. Automated Tests | ⬜ | |

**Overall Result:** ⬜ Pass / ⬜ Fail

---

## Sharing Results

After completing all tests, share:

1. The completed results table above
2. Console output from any failed tests
3. Your environment details:
   - OS:
   - Python version:
   - Any issues encountered

Paste results to Claude for review.
