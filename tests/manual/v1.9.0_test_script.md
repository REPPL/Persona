# Manual Test Script: v1.9.0 - Multi-Model Generation & UX Improvements

## Prerequisites

### Environment Setup
- [ ] Python 3.12+ installed
- [ ] Virtual environment activated (`.venv/`)
- [ ] All dependencies installed (`pip install -e ".[all]"`)

### For Multi-Model Tests
- [ ] At least one cloud provider configured (Anthropic, OpenAI, or Google)
- [ ] Ollama installed and running for local model tests
- [ ] API keys in `.env` file

---

## Test 1: Multi-Model Generation Flags

**Purpose:** Verify --local, --cloud, and --all flags work for model selection.

### Test 1a: Local Models Only

```bash
# Create test data
mkdir -p /tmp/persona_test
echo "A user who loves hiking and outdoor activities" > /tmp/persona_test/profile.txt

# Generate with local models only (requires Ollama)
persona generate --from /tmp/persona_test/profile.txt \
    --local \
    --count 1
```

**Expected Results:**
- [ ] Uses only Ollama models
- [ ] Generates persona successfully (if Ollama running)
- [ ] Shows appropriate error if Ollama not available

### Test 1b: Cloud Models Only

```bash
# Generate with cloud providers only
persona generate --from /tmp/persona_test/profile.txt \
    --cloud \
    --count 1
```

**Expected Results:**
- [ ] Uses only cloud providers (Anthropic/OpenAI/Google)
- [ ] Skips local Ollama models
- [ ] Generates persona successfully

### Test 1c: All Models

```bash
# Generate with all available models
persona generate --from /tmp/persona_test/profile.txt \
    --all \
    --count 1
```

**Expected Results:**
- [ ] Uses both local and cloud models
- [ ] Multi-model comparison output if multiple models used

---

## Test 2: Per-Model YAML Configuration

**Purpose:** Verify model-specific YAML configurations load correctly.

```bash
# Check model configurations
ls -la config/models/

# View a model config
cat config/models/anthropic/claude-sonnet-4.5.yaml

# List available models
persona model list
```

**Expected Results:**
- [ ] Model config files exist in config/models/
- [ ] YAML contains model-specific settings
- [ ] Model list shows available models with pricing

---

## Test 3: Interactive Wizard Launch (persona -i)

**Purpose:** Verify -i flag launches interactive mode directly.

```bash
# Launch interactive mode
persona -i
# (Press Ctrl+C to exit after verifying it launches)
```

**Expected Results:**
- [ ] Interactive wizard launches immediately
- [ ] Shows welcome prompt and options
- [ ] Can be exited with Ctrl+C

---

## Test 4: Eval Patterns UX Improvements

**Purpose:** Verify improved UX from eval repo patterns.

```bash
# Check help is improved
persona --help

# Check generate help
persona generate --help
```

**Expected Results:**
- [ ] Help is clear and well-organised
- [ ] Options are grouped logically
- [ ] Examples are provided

---

## Test 5: Environment Variable Loading

**Purpose:** Verify .env file is loaded automatically.

```bash
# Check if providers are detected from .env
persona check
```

**Expected Results:**
- [ ] Shows configured providers from .env
- [ ] API keys detected (shows ✓ or ✗ for each provider)

---

## Test 6: Experiment Output Path Fix (v1.9.1)

**Purpose:** Verify outputs go to correct experiment directory.

```bash
# Create experiment
persona experiment create output-test -d "Testing output paths"

# Add data
echo "A user who loves cooking" > experiments/output-test/data/profile.txt

# Generate
persona generate --from experiments/output-test/data/profile.txt \
    --experiment output-test \
    --count 1

# Check output location
ls -la experiments/output-test/outputs/
```

**Expected Results:**
- [ ] Output goes to `experiments/output-test/outputs/`
- [ ] NOT to `outputs/output-test/`
- [ ] Timestamped folder contains personas

---

## Cleanup

```bash
# Remove test experiment
persona experiment delete output-test --force

# Remove temp files
rm -rf /tmp/persona_test
```

---

## Summary Checklist

| Test | Status |
|------|--------|
| --local flag | [ ] |
| --cloud flag | [ ] |
| --all flag | [ ] |
| Per-model YAML config | [ ] |
| Interactive wizard (-i) | [ ] |
| UX improvements | [ ] |
| .env loading | [ ] |
| Experiment output path | [ ] |

**Tester:** _______________
**Date:** _______________
**Version:** v1.9.0 / v1.9.1
